 ØªØ­Ù„ÛŒÙ„ Ø¹Ù…ÛŒÙ‚: AI Ø§Ù„Ø§Ù† Ú†Ù‡ Ù…ÛŒâ€ŒØ¯Ø§Ù†Ø¯ Ùˆ Ú†Ù‡ Ù†Ù…ÛŒâ€ŒØ¯Ø§Ù†Ø¯
text

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ÙˆØ¶Ø¹ÛŒØª ÙØ¹Ù„ÛŒ Ù‡ÙˆØ´ Ù…ØµÙ†ÙˆØ¹ÛŒ                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  âœ… Ú†ÛŒØ²Ù‡Ø§ÛŒÛŒ Ú©Ù‡ AI Ø§Ù„Ø§Ù† Ù…ÛŒâ€ŒØ¯Ø§Ù†Ø¯:                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ â€¢ ØªØ¹Ø¯Ø§Ø¯ Ú©Ù„ Ú©Ø§Ù„Ø§Ù‡Ø§ (664 Ù‚Ù„Ù…)                            â”‚    â”‚
â”‚  â”‚ â€¢ ØªÙÚ©ÛŒÚ© Food/NonFood                                   â”‚    â”‚
â”‚  â”‚ â€¢ Ø®Ø±ÛŒØ¯/Ù…ØµØ±Ù/Ø¶Ø§ÛŒØ¹Ø§Øª 30 Ø±ÙˆØ² (ÙÙ‚Ø· Ù…Ø¨Ù„Øº Ú©Ù„)               â”‚    â”‚
â”‚  â”‚ â€¢ Ù†Ø³Ø¨Øª Ø¶Ø§ÛŒØ¹Ø§Øª Ø¨Ù‡ Ø®Ø±ÛŒØ¯ (ÛŒÚ© Ø¹Ø¯Ø¯ Ø³Ø§Ø¯Ù‡)                   â”‚    â”‚
â”‚  â”‚ â€¢ ABC Classification (5 ØªØ§ÛŒ Ø¨Ø±ØªØ± Ù‡Ø± Ú©Ù„Ø§Ø³)             â”‚    â”‚
â”‚  â”‚ â€¢ Ù„ÛŒØ³Øª Ù‡ØªÙ„â€ŒÙ‡Ø§ÛŒ Ú©Ø§Ø±Ø¨Ø±                                   â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                  â”‚
â”‚  âŒ Ú†ÛŒØ²Ù‡Ø§ÛŒÛŒ Ú©Ù‡ AI Ù†Ù…ÛŒâ€ŒØ¯Ø§Ù†Ø¯ (Ùˆ Ø¨Ø§ÛŒØ¯ Ø¨Ø¯Ø§Ù†Ø¯):                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ â€¢ Ù…ÙˆØ¬ÙˆØ¯ÛŒ ÙˆØ§Ù‚Ø¹ÛŒ Ù‡Ø± Ú©Ø§Ù„Ø§ (Ú†Ù†Ø¯ Ú©ÛŒÙ„Ùˆ Ø¨Ø±Ù†Ø¬ Ø¯Ø§Ø±ÛŒÙ…ØŸ)         â”‚    â”‚
â”‚  â”‚ â€¢ Ú©Ø¯Ø§Ù… Ú©Ø§Ù„Ø§Ù‡Ø§ Ú©Ù… Ù‡Ø³ØªÙ†Ø¯ / Ø²ÛŒØ§Ø¯ Ù‡Ø³ØªÙ†Ø¯                   â”‚    â”‚
â”‚  â”‚ â€¢ Ú†Ø±Ø§ Ø¶Ø§ÛŒØ¹Ø§Øª Ø±Ø® Ø¯Ø§Ø¯Ù‡ (ØªØ§Ø±ÛŒØ® Ø§Ù†Ù‚Ø¶Ø§ØŸ Ø®Ø±Ø§Ø¨ÛŒØŸ)            â”‚    â”‚
â”‚  â”‚ â€¢ Ú†Ù†Ø¯ ØªØ±Ø§Ú©Ù†Ø´ Ù…Ù†ØªØ¸Ø± ØªØ§ÛŒÛŒØ¯ Ø§Ø³Øª                          â”‚    â”‚
â”‚  â”‚ â€¢ Ú©Ø¯Ø§Ù… Ú©Ø§Ù„Ø§Ù‡Ø§ Ù†ÛŒØ§Ø² Ø¨Ù‡ Ø´Ù…Ø§Ø±Ø´ Ø¯Ø§Ø±Ù†Ø¯                     â”‚    â”‚
â”‚  â”‚ â€¢ Ù…ØºØ§ÛŒØ±Øªâ€ŒÙ‡Ø§ÛŒ Ø§Ù†Ø¨Ø§Ø±Ú¯Ø±Ø¯Ø§Ù†ÛŒ                               â”‚    â”‚
â”‚  â”‚ â€¢ Ø±ÙˆÙ†Ø¯ Ø¶Ø§ÛŒØ¹Ø§Øª (Ø¯Ø± Ø­Ø§Ù„ Ø§ÙØ²Ø§ÛŒØ´ØŸ Ú©Ø§Ù‡Ø´ØŸ)                  â”‚    â”‚
â”‚  â”‚ â€¢ Ù…Ù‚Ø§ÛŒØ³Ù‡ Ù‡ØªÙ„â€ŒÙ‡Ø§ Ø¨Ø§ Ù‡Ù…                                  â”‚    â”‚
â”‚  â”‚ â€¢ Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ Ø®Ø±ÛŒØ¯ Ù‡ÙˆØ´Ù…Ù†Ø¯                                 â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
ğŸ¯ Ú©Ø¬Ø§Ù‡Ø§ Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒÙ… Ø§Ø² AI Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒÙ…ØŸ
Û±) Ú†Øªâ€ŒØ¨Ø§Øª Ù‡ÙˆØ´Ù…Ù†Ø¯ (Chat Assistant)
Ù‚Ø§Ø¨Ù„ÛŒØª	ÙˆØ¶Ø¹ÛŒØª ÙØ¹Ù„ÛŒ	Ø¨Ø¹Ø¯ Ø§Ø² Ø§ØªØµØ§Ù„
"Ù…ÙˆØ¬ÙˆØ¯ÛŒ Ø¨Ø±Ù†Ø¬ Ú†Ù‚Ø¯Ø±Ù‡ØŸ"	âŒ Ù†Ù…ÛŒâ€ŒØ¯Ø§Ù†Ø¯	âœ… Ø¬ÙˆØ§Ø¨ Ø¯Ù‚ÛŒÙ‚ + Ù‡Ø´Ø¯Ø§Ø±
"Ú†Ø±Ø§ Ø¶Ø§ÛŒØ¹Ø§Øª Ø²ÛŒØ§Ø¯ Ø´Ø¯Ù‡ØŸ"	âŒ ÙÙ‚Ø· Ø¹Ø¯Ø¯ Ú©Ù„	âœ… ØªØ­Ù„ÛŒÙ„ Ø¨Ù‡ ØªÙÚ©ÛŒÚ© Ø¯Ù„ÛŒÙ„
"Ú†Ù‡ Ú†ÛŒØ²ÛŒ Ø¨Ø§ÛŒØ¯ Ø¨Ø®Ø±Ù…ØŸ"	âŒ Ù†Ø¯Ø§Ø±Ø¯	âœ… Ù„ÛŒØ³Øª Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ÛŒ
"ÙˆØ¶Ø¹ÛŒØª Ø§Ù†Ø¨Ø§Ø± Ú†Ø·ÙˆØ±Ù‡ØŸ"	âŒ Ù†Ø¯Ø§Ø±Ø¯	âœ… Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ ØµÙˆØªÛŒ
"Ú©Ø¯Ø§Ù… Ù‡ØªÙ„ Ø¨Ù‡ØªØ± Ú©Ø§Ø± Ù…ÛŒâ€ŒÚ©Ù†Ø¯ØŸ"	âŒ Ù†Ø¯Ø§Ø±Ø¯	âœ… Ù…Ù‚Ø§ÛŒØ³Ù‡ KPIÙ‡Ø§
Û²) Ù‡Ø´Ø¯Ø§Ø±Ù‡Ø§ÛŒ Ù‡ÙˆØ´Ù…Ù†Ø¯ (Smart Alerts)
Ù‡Ø´Ø¯Ø§Ø±	ÙØ¹Ù„ÛŒ	Ø¨Ø¹Ø¯ Ø§Ø² Ø§ØªØµØ§Ù„
Ù…ÙˆØ¬ÙˆØ¯ÛŒ Ú©Ù…	âš ï¸ ÙÙ‚Ø· Ø¯Ø± UI	âœ… AI ØªØ­Ù„ÛŒÙ„ Ù…ÛŒâ€ŒÚ©Ù†Ø¯ + Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ Ù…ÛŒâ€ŒØ¯Ù‡Ø¯
Ø¶Ø§ÛŒØ¹Ø§Øª Ø¨Ø§Ù„Ø§	âŒ Ù†Ø¯Ø§Ø±Ø¯	âœ… ØªØ´Ø®ÛŒØµ Ø§Ù„Ú¯Ùˆ + Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯
ØªØ§ÛŒÛŒØ¯ Ù…Ø¹Ù„Ù‚	âŒ Ù†Ø¯Ø§Ø±Ø¯	âœ… ÛŒØ§Ø¯Ø¢ÙˆØ±ÛŒ Ø¨Ù‡ Ù…Ø¯ÛŒØ±
Ø§Ù†Ø¨Ø§Ø±Ú¯Ø±Ø¯Ø§Ù†ÛŒ Ø¹Ù‚Ø¨â€ŒÙ…Ø§Ù†Ø¯Ù‡	âŒ Ù†Ø¯Ø§Ø±Ø¯	âœ… Ø§ÙˆÙ„ÙˆÛŒØªâ€ŒØ¨Ù†Ø¯ÛŒ Ù‡ÙˆØ´Ù…Ù†Ø¯
Û³) Ú¯Ø²Ø§Ø±Ø´â€ŒÙ‡Ø§ÛŒ ØªØ­Ù„ÛŒÙ„ÛŒ (AI-Powered Reports)
Ú¯Ø²Ø§Ø±Ø´	ÙØ¹Ù„ÛŒ	Ø¨Ø¹Ø¯ Ø§Ø² Ø§ØªØµØ§Ù„
Pareto/ABC	âœ… Ø¯Ø§Ø±Ø¯	âœ… + ØªÙˆØ¶ÛŒØ­ AI
ØªØ­Ù„ÛŒÙ„ Ø¶Ø§ÛŒØ¹Ø§Øª	âš ï¸ Ø³Ø§Ø¯Ù‡	âœ… ØªØ­Ù„ÛŒÙ„ Ø¹Ù…ÛŒÙ‚ + ØªÙˆØµÛŒÙ‡
Ù¾ÛŒØ´â€ŒØ¨ÛŒÙ†ÛŒ ØªÙ‚Ø§Ø¶Ø§	âŒ Ù†Ø¯Ø§Ø±Ø¯	âœ… Ø¨Ø± Ø§Ø³Ø§Ø³ ØªØ§Ø±ÛŒØ®Ú†Ù‡
Ù…Ù‚Ø§ÛŒØ³Ù‡ Ù‡ØªÙ„â€ŒÙ‡Ø§	âŒ Ù†Ø¯Ø§Ø±Ø¯	âœ… Ø¨Ù†Ú†Ù…Ø§Ø±Ú©ÛŒÙ†Ú¯
Û´) Ø¯Ø³ØªÛŒØ§Ø± Ø¹Ù…Ù„ÛŒØ§ØªÛŒ (Operations Assistant)
Ø¹Ù…Ù„ÛŒØ§Øª	ÙØ¹Ù„ÛŒ	Ø¨Ø¹Ø¯ Ø§Ø² Ø§ØªØµØ§Ù„
Ø§Ù†Ø¨Ø§Ø±Ú¯Ø±Ø¯Ø§Ù†ÛŒ	âŒ Ø¯Ø³ØªÛŒ	âœ… AI Ø§ÙˆÙ„ÙˆÛŒØª Ù…ÛŒâ€ŒØ¯Ù‡Ø¯
ØªØ§ÛŒÛŒØ¯ Ø¶Ø§ÛŒØ¹Ø§Øª	âŒ Ø¯Ø³ØªÛŒ	âœ… AI Ø¨Ø±Ø±Ø³ÛŒ Ø§ÙˆÙ„ÛŒÙ‡ Ù…ÛŒâ€ŒÚ©Ù†Ø¯
Ø³ÙØ§Ø±Ø´ Ø®Ø±ÛŒØ¯	âŒ Ù†Ø¯Ø§Ø±Ø¯	âœ… Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ Ø®ÙˆØ¯Ú©Ø§Ø±
ğŸ“Š Context Ø¬Ø¯ÛŒØ¯ Ú©Ù‡ Ø¨Ø§ÛŒØ¯ Ø§Ø¶Ø§ÙÙ‡ Ø´ÙˆØ¯
Python

# Ø³Ø§Ø®ØªØ§Ø± Ú©Ø§Ù…Ù„ Context Ø§Ù†Ø¨Ø§Ø± Ø¨Ø±Ø§ÛŒ AI
warehouse_context = {
    
    # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    # Ø¨Ø®Ø´ Û±: ÙˆØ¶Ø¹ÛŒØª Ù„Ø­Ø¸Ù‡â€ŒØ§ÛŒ Ù…ÙˆØ¬ÙˆØ¯ÛŒ
    # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    "stock_status": {
        "total_items": 664,
        "total_value": "5,087,800,510 Ø±ÛŒØ§Ù„",
        
        # ÙˆØ¶Ø¹ÛŒØª Ø¨Ø­Ø±Ø§Ù†ÛŒ
        "critical_items": [
            {
                "name": "Ø¨Ø±Ù†Ø¬ Ø§ÛŒØ±Ø§Ù†ÛŒ",
                "current": 5,
                "min": 50,
                "unit": "Ú©ÛŒÙ„ÙˆÚ¯Ø±Ù…",
                "days_to_stockout": 2,  # Ú†Ù†Ø¯ Ø±ÙˆØ² ØªØ§ Ø§ØªÙ…Ø§Ù…
                "last_purchase_price": 85000,
                "suggested_order": 100
            },
            # ...
        ],
        "critical_count": 23,
        
        # Ù…ÙˆØ¬ÙˆØ¯ÛŒ Ø²ÛŒØ§Ø¯
        "overstocked_items": [
            {
                "name": "Ù†Ù…Ú©",
                "current": 200,
                "max": 50,
                "unit": "Ú©ÛŒÙ„ÙˆÚ¯Ø±Ù…",
                "excess_value": "1,500,000 Ø±ÛŒØ§Ù„"
            }
        ],
        "overstocked_count": 5,
        
        # Ø®Ù„Ø§ØµÙ‡
        "healthy_count": 636  # Ù…ÙˆØ¬ÙˆØ¯ÛŒ Ù†Ø±Ù…Ø§Ù„
    },
    
    # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    # Ø¨Ø®Ø´ Û²: ØªØ­Ù„ÛŒÙ„ Ø¶Ø§ÛŒØ¹Ø§Øª
    # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    "waste_analysis": {
        "current_month": {
            "rate": 5.2,  # Ø¯Ø±ØµØ¯
            "target": 3.0,
            "status": "critical",  # good/warning/critical
            "total_amount": 1198606,
            "total_qty": 45.5,
            
            # Ø¨Ù‡ ØªÙÚ©ÛŒÚ© Ø¯Ù„ÛŒÙ„
            "by_reason": [
                {"reason": "ØªØ§Ø±ÛŒØ® Ø§Ù†Ù‚Ø¶Ø§", "amount": 539372, "percentage": 45},
                {"reason": "Ø®Ø±Ø§Ø¨ÛŒ", "amount": 359581, "percentage": 30},
                {"reason": "ØªÙˆÙ„ÛŒØ¯ Ø§Ø¶Ø§ÙÛŒ", "amount": 299651, "percentage": 25}
            ],
            
            # Ù¾Ø±Ø¶Ø§ÛŒØ¹Ø§Øªâ€ŒØªØ±ÛŒÙ† Ú©Ø§Ù„Ø§Ù‡Ø§
            "top_wasted": [
                {"name": "Ø´ÛŒØ±", "amount": 450000, "reason": "ØªØ§Ø±ÛŒØ® Ø§Ù†Ù‚Ø¶Ø§"},
                {"name": "Ù†Ø§Ù†", "amount": 280000, "reason": "ØªÙˆÙ„ÛŒØ¯ Ø§Ø¶Ø§ÙÛŒ"},
                {"name": "Ø³Ø§Ù„Ø§Ø¯", "amount": 180000, "reason": "Ø®Ø±Ø§Ø¨ÛŒ"}
            ]
        },
        
        # Ø±ÙˆÙ†Ø¯
        "trend": {
            "direction": "increasing",  # increasing/decreasing/stable
            "change_percentage": 15,  # Ù†Ø³Ø¨Øª Ø¨Ù‡ Ù…Ø§Ù‡ Ù‚Ø¨Ù„
            "last_3_months": [3.2, 4.1, 5.2]
        },
        
        # Ù…Ù‚Ø§ÛŒØ³Ù‡ Ø¨Ø§ Ù‡ØªÙ„â€ŒÙ‡Ø§ÛŒ Ø¯ÛŒÚ¯Ø± (Ø§Ú¯Ø± admin)
        "hotel_comparison": [
            {"hotel": "Ù„Ø§Ù„Ù‡ Ø¨ÛŒØ³ØªÙˆÙ†", "rate": 2.1, "rank": 1},
            {"hotel": "Ú©Ù†Ø¯ÙˆØ§Ù†", "rate": 3.2, "rank": 2},
            {"hotel": "Ø²Ø§Ú¯Ø±Ø³", "rate": 5.8, "rank": 3}
        ]
    },
    
    # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    # Ø¨Ø®Ø´ Û³: Ø§Ù‚Ø¯Ø§Ù…Ø§Øª Ù…Ø¹Ù„Ù‚
    # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    "pending_actions": {
        "approvals": {
            "count": 3,
            "total_amount": 2500000,
            "items": [
                {
                    "id": 2243,
                    "item": "Ø¢Ø¨ Ù…Ø¹Ø¯Ù†ÛŒ",
                    "amount": 600000,
                    "reason": "Ø®Ø±Ø§Ø¨ÛŒ",
                    "submitted_by": "Ú©Ø±ÛŒÙ…ÛŒ",
                    "waiting_hours": 24
                }
            ]
        },
        
        "inventory_counts": {
            "overdue_count": 12,
            "items": [
                {"name": "Ø¨Ø±Ù†Ø¬", "days_since_count": 45},
                {"name": "Ø±ÙˆØºÙ†", "days_since_count": 38}
            ]
        },
        
        "unresolved_variances": {
            "count": 2,
            "total_variance": 150000,
            "items": [
                {"name": "Ø´Ú©Ø±", "variance": -5, "percentage": -8}
            ]
        }
    },
    
    # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    # Ø¨Ø®Ø´ Û´: Ù‡Ø´Ø¯Ø§Ø±Ù‡Ø§ÛŒ ÙØ¹Ø§Ù„
    # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    "active_alerts": [
        {
            "type": "low_stock",
            "severity": "critical",
            "item": "Ø¨Ø±Ù†Ø¬ Ø§ÛŒØ±Ø§Ù†ÛŒ",
            "message": "Ù…ÙˆØ¬ÙˆØ¯ÛŒ Ø¨Ø­Ø±Ø§Ù†ÛŒ - ÙÙ‚Ø· Û² Ø±ÙˆØ² Ø¨Ø§Ù‚ÛŒâ€ŒÙ…Ø§Ù†Ø¯Ù‡",
            "created_at": "Û² Ø³Ø§Ø¹Øª Ù¾ÛŒØ´"
        },
        {
            "type": "high_waste",
            "severity": "warning",
            "message": "Ù†Ø±Ø® Ø¶Ø§ÛŒØ¹Ø§Øª Ûµ.Û²Ùª - Ø¨Ø§Ù„Ø§ØªØ± Ø§Ø² Ù‡Ø¯Ù Û³Ùª",
            "created_at": "Ø§Ù…Ø±ÙˆØ²"
        },
        {
            "type": "pending_approval",
            "severity": "info",
            "message": "Û³ ØªØ±Ø§Ú©Ù†Ø´ Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø± ØªØ§ÛŒÛŒØ¯ Ø´Ù…Ø§",
            "created_at": "Ø¯ÛŒØ±ÙˆØ²"
        }
    ],
    
    # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    # Ø¨Ø®Ø´ Ûµ: KPIÙ‡Ø§ÛŒ Ú©Ù„ÛŒØ¯ÛŒ
    # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    "kpis": {
        "waste_rate": {"value": 5.2, "target": 3.0, "status": "critical"},
        "stock_turnover": {"value": 12.5, "target": 12, "status": "good"},
        "variance_rate": {"value": 1.8, "target": 2.0, "status": "good"},
        "fill_rate": {"value": 94, "target": 95, "status": "warning"},
        "avg_days_inventory": {"value": 15, "target": 14, "status": "warning"}
    },
    
    # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    # Ø¨Ø®Ø´ Û¶: Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯Ø§Øª Ù‡ÙˆØ´Ù…Ù†Ø¯
    # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    "smart_suggestions": {
        "reorder_list": [
            {
                "item": "Ø¨Ø±Ù†Ø¬ Ø§ÛŒØ±Ø§Ù†ÛŒ",
                "suggested_qty": 100,
                "unit": "Ú©ÛŒÙ„ÙˆÚ¯Ø±Ù…",
                "estimated_cost": 8500000,
                "urgency": "ÙÙˆØ±ÛŒ"
            },
            {
                "item": "Ø±ÙˆØºÙ†",
                "suggested_qty": 50,
                "unit": "Ù„ÛŒØªØ±",
                "estimated_cost": 3500000,
                "urgency": "Ø§ÛŒÙ† Ù‡ÙØªÙ‡"
            }
        ],
        
        "waste_reduction": [
            "Ø¨Ø±Ø±Ø³ÛŒ Ø³ÛŒØ§Ø³Øª Ø®Ø±ÛŒØ¯ Ø´ÛŒØ± - Û´ÛµÙª Ø¶Ø§ÛŒØ¹Ø§Øª Ø¨Ù‡ Ø¯Ù„ÛŒÙ„ Ø§Ù†Ù‚Ø¶Ø§",
            "Ú©Ø§Ù‡Ø´ ØªÙˆÙ„ÛŒØ¯ Ù†Ø§Ù† Ø´Ø¨ - Û²ÛµÙª Ø¶Ø§ÛŒØ¹Ø§Øª ØªÙˆÙ„ÛŒØ¯ Ø§Ø¶Ø§ÙÛŒ"
        ],
        
        "count_priorities": [
            "Ø¨Ø±Ù†Ø¬ - Û´Ûµ Ø±ÙˆØ² Ø§Ø² Ø¢Ø®Ø±ÛŒÙ† Ø´Ù…Ø§Ø±Ø´ Ú¯Ø°Ø´ØªÙ‡",
            "Ø±ÙˆØºÙ† - Ú©Ø§Ù„Ø§ÛŒ Ø¨Ø§ Ø§Ø±Ø²Ø´ Ø¨Ø§Ù„Ø§"
        ]
    }
}
ğŸ› ï¸ Ù¾Ø±Ø§Ù…Ù¾Øª Ú©Ø§Ù…Ù„ Ø¨Ø±Ø§ÛŒ Agent (Ø§ØªØµØ§Ù„ Warehouse Ø¨Ù‡ AI)
text

Integrate the Warehouse Management System with the AI Chatbot.

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
OBJECTIVE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Make the AI chatbot fully aware of warehouse status so it can:
1. Answer questions about current stock levels
2. Analyze waste patterns and suggest improvements
3. Recommend purchases based on stock status
4. Alert managers about pending actions
5. Compare hotel performance
6. Guide inventory counting priorities

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
PHASE 1: CREATE WAREHOUSE CONTEXT BUILDER
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Create a new function in services/chat_service.py:

```python
def _get_warehouse_context(self, user, hotel_ids: list) -> dict:
    """Build comprehensive warehouse context for AI"""
    from services.warehouse_service import WarehouseService
    from services.waste_analysis_service import WasteAnalysisService
    from services.inventory_count_service import InventoryCountService
    from models import Item, Transaction, Alert, InventoryCount
    from datetime import date, timedelta
    from decimal import Decimal
    
    context = {
        "stock_status": {},
        "waste_analysis": {},
        "pending_actions": {},
        "active_alerts": [],
        "kpis": {},
        "smart_suggestions": {}
    }
    
    # Apply hotel scoping
    if hotel_ids is None:
        # Admin - aggregate all hotels
        hotel_filter = True
    else:
        hotel_filter = Item.hotel_id.in_(hotel_ids)
    
    # â•â•â• STOCK STATUS â•â•â•
    items = Item.query.filter(hotel_filter, Item.is_active == True).all()
    
    critical_items = []
    overstocked_items = []
    
    for item in items:
        if item.current_stock <= item.min_stock:
            # Calculate days to stockout
            avg_daily_consumption = self._get_avg_daily_consumption(item.id, 30)
            days_left = int(item.current_stock / avg_daily_consumption) if avg_daily_consumption > 0 else 999
            
            critical_items.append({
                "name": item.item_name_fa,
                "current": float(item.current_stock),
                "min": float(item.min_stock),
                "unit": item.unit,
                "days_to_stockout": days_left,
                "suggested_order": float(item.max_stock - item.current_stock) if item.max_stock else float(item.min_stock * 2)
            })
        
        if item.max_stock and item.current_stock >= item.max_stock:
            overstocked_items.append({
                "name": item.item_name_fa,
                "current": float(item.current_stock),
                "max": float(item.max_stock),
                "unit": item.unit
            })
    
    # Sort by urgency
    critical_items.sort(key=lambda x: x['days_to_stockout'])
    
    context["stock_status"] = {
        "total_items": len(items),
        "critical_items": critical_items[:10],  # Top 10 most urgent
        "critical_count": len(critical_items),
        "overstocked_items": overstocked_items[:5],
        "overstocked_count": len(overstocked_items),
        "healthy_count": len(items) - len(critical_items) - len(overstocked_items)
    }
    
    # â•â•â• WASTE ANALYSIS â•â•â•
    today = date.today()
    month_start = today.replace(day=1)
    last_month_start = (month_start - timedelta(days=1)).replace(day=1)
    
    # Current month waste
    waste_service = WasteAnalysisService()
    current_waste = waste_service.get_waste_summary(
        hotel_id=hotel_ids[0] if hotel_ids else None,
        start_date=month_start,
        end_date=today
    )
    
    waste_by_reason = waste_service.get_waste_by_reason(
        hotel_id=hotel_ids[0] if hotel_ids else None,
        start_date=month_start,
        end_date=today
    )
    
    top_wasted = waste_service.get_top_wasted_items(
        hotel_id=hotel_ids[0] if hotel_ids else None,
        start_date=month_start,
        end_date=today,
        limit=5
    )
    
    context["waste_analysis"] = {
        "current_month": {
            "rate": float(current_waste.get('waste_rate', 0)),
            "target": 3.0,
            "status": current_waste.get('status', 'unknown'),
            "total_amount": float(current_waste.get('total_waste', 0)),
            "by_reason": [
                {
                    "reason": WASTE_REASONS.get(r['reason'], r['reason']),
                    "amount": float(r['amount']),
                    "percentage": round(float(r['amount']) / float(current_waste.get('total_waste', 1)) * 100)
                }
                for r in waste_by_reason
            ],
            "top_wasted": [
                {"name": item[0].item_name_fa, "amount": float(item[1])}
                for item in top_wasted
            ]
        }
    }
    
    # â•â•â• PENDING ACTIONS â•â•â•
    # Pending approvals
    pending_txs = Transaction.query.filter(
        Transaction.requires_approval == True,
        Transaction.approval_status == 'pending',
        Transaction.is_deleted == False
    )
    if hotel_ids:
        pending_txs = pending_txs.filter(Transaction.hotel_id.in_(hotel_ids))
    pending_txs = pending_txs.all()
    
    # Items needing count
    count_service = InventoryCountService()
    items_needing_count = count_service.get_items_needing_count(
        hotel_id=hotel_ids[0] if hotel_ids else None,
        days_threshold=30
    )
    
    # Unresolved variances
    unresolved = InventoryCount.query.filter(
        InventoryCount.status.in_(['pending', 'investigating'])
    )
    if hotel_ids:
        unresolved = unresolved.filter(InventoryCount.hotel_id.in_(hotel_ids))
    unresolved = unresolved.all()
    
    context["pending_actions"] = {
        "approvals": {
            "count": len(pending_txs),
            "total_amount": sum(float(tx.total_amount or 0) for tx in pending_txs),
            "items": [
                {
                    "id": tx.id,
                    "item": tx.item.item_name_fa if tx.item else "Ù†Ø§Ù…Ø´Ø®Øµ",
                    "amount": float(tx.total_amount or 0),
                    "reason": WASTE_REASONS.get(tx.waste_reason, tx.waste_reason)
                }
                for tx in pending_txs[:5]
            ]
        },
        "inventory_counts": {
            "overdue_count": len(items_needing_count),
            "items": [
                {"name": item.item_name_fa}
                for item in items_needing_count[:5]
            ]
        },
        "unresolved_variances": {
            "count": len(unresolved),
            "items": [
                {
                    "name": v.item.item_name_fa if v.item else "Ù†Ø§Ù…Ø´Ø®Øµ",
                    "variance": float(v.variance),
                    "percentage": float(v.variance_percentage or 0)
                }
                for v in unresolved[:5]
            ]
        }
    }
    
    # â•â•â• ACTIVE ALERTS â•â•â•
    alerts = Alert.query.filter(
        Alert.status == 'active'
    )
    if hotel_ids:
        alerts = alerts.filter(Alert.hotel_id.in_(hotel_ids))
    alerts = alerts.order_by(Alert.created_at.desc()).limit(10).all()
    
    context["active_alerts"] = [
        {
            "type": alert.alert_type,
            "message": alert.message,
            "severity": "critical" if alert.alert_type in ['low_stock', 'high_waste'] else "warning"
        }
        for alert in alerts
    ]
    
    # â•â•â• KPIs â•â•â•
    context["kpis"] = {
        "waste_rate": {
            "value": float(current_waste.get('waste_rate', 0)),
            "target": 3.0,
            "status": "critical" if float(current_waste.get('waste_rate', 0)) > 5 else "warning" if float(current_waste.get('waste_rate', 0)) > 3 else "good"
        },
        "low_stock_items": {
            "value": len(critical_items),
            "target": 0,
            "status": "critical" if len(critical_items) > 10 else "warning" if len(critical_items) > 5 else "good"
        },
        "pending_approvals": {
            "value": len(pending_txs),
            "target": 0,
            "status": "warning" if len(pending_txs) > 0 else "good"
        }
    }
    
    # â•â•â• SMART SUGGESTIONS â•â•â•
    context["smart_suggestions"] = {
        "reorder_list": [
            {
                "item": item["name"],
                "suggested_qty": item["suggested_order"],
                "unit": item["unit"],
                "urgency": "ÙÙˆØ±ÛŒ" if item["days_to_stockout"] <= 3 else "Ø§ÛŒÙ† Ù‡ÙØªÙ‡"
            }
            for item in critical_items[:5]
        ],
        "waste_reduction": [],
        "count_priorities": [
            item.item_name_fa for item in items_needing_count[:5]
        ]
    }
    
    # Add waste reduction suggestions based on top reasons
    if waste_by_reason:
        top_reason = waste_by_reason[0] if waste_by_reason else None
        if top_reason:
            reason_text = WASTE_REASONS.get(top_reason['reason'], top_reason['reason'])
            context["smart_suggestions"]["waste_reduction"].append(
                f"Ø¨Ø±Ø±Ø³ÛŒ Ø¯Ù„ÛŒÙ„ Ø§ØµÙ„ÛŒ Ø¶Ø§ÛŒØ¹Ø§Øª: {reason_text}"
            )
    
    return context

def _get_avg_daily_consumption(self, item_id: int, days: int = 30) -> float:
    """Calculate average daily consumption for an item"""
    from datetime import date, timedelta
    start_date = date.today() - timedelta(days=days)
    
    total_consumption = db.session.query(func.sum(Transaction.quantity)).filter(
        Transaction.item_id == item_id,
        Transaction.transaction_type == 'Ù…ØµØ±Ù',
        Transaction.transaction_date >= start_date,
        Transaction.is_deleted == False
    ).scalar() or 0
    
    return float(total_consumption) / days
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
PHASE 2: UPDATE MAIN CONTEXT BUILDER
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

In services/chat_service.py, update _get_full_database_context:

Python

def _get_full_database_context(self, user) -> str:
    """Build comprehensive context including warehouse data"""
    
    # Get allowed hotels
    hotel_ids = get_allowed_hotel_ids(user)
    
    # Existing context building...
    context_parts = []
    
    # ... existing code for items, transactions, ABC ...
    
    # â•â•â• ADD WAREHOUSE CONTEXT â•â•â•
    warehouse_ctx = self._get_warehouse_context(user, hotel_ids)
    
    context_parts.append(f"""
â•â•â• ÙˆØ¶Ø¹ÛŒØª Ø§Ù†Ø¨Ø§Ø± â•â•â•
Ù…ÙˆØ¬ÙˆØ¯ÛŒ Ø¨Ø­Ø±Ø§Ù†ÛŒ: {warehouse_ctx['stock_status']['critical_count']} Ù‚Ù„Ù…
Ù…ÙˆØ¬ÙˆØ¯ÛŒ Ø§Ø¶Ø§ÙÛŒ: {warehouse_ctx['stock_status']['overstocked_count']} Ù‚Ù„Ù…
Ù…ÙˆØ¬ÙˆØ¯ÛŒ Ø³Ø§Ù„Ù…: {warehouse_ctx['stock_status']['healthy_count']} Ù‚Ù„Ù…

Ú©Ø§Ù„Ø§Ù‡Ø§ÛŒ Ù†ÛŒØ§Ø²Ù…Ù†Ø¯ Ø³ÙØ§Ø±Ø´ ÙÙˆØ±ÛŒ:
{self._format_critical_items(warehouse_ctx['stock_status']['critical_items'])}

â•â•â• ØªØ­Ù„ÛŒÙ„ Ø¶Ø§ÛŒØ¹Ø§Øª â•â•â•
Ù†Ø±Ø® Ø¶Ø§ÛŒØ¹Ø§Øª Ù…Ø§Ù‡ Ø¬Ø§Ø±ÛŒ: {warehouse_ctx['waste_analysis']['current_month']['rate']}%
Ù‡Ø¯Ù: {warehouse_ctx['waste_analysis']['current_month']['target']}%
ÙˆØ¶Ø¹ÛŒØª: {warehouse_ctx['waste_analysis']['current_month']['status']}
Ù…Ø¬Ù…ÙˆØ¹ Ø¶Ø§ÛŒØ¹Ø§Øª: {warehouse_ctx['waste_analysis']['current_month']['total_amount']:,.0f} Ø±ÛŒØ§Ù„

Ø¯Ù„Ø§ÛŒÙ„ Ø§ØµÙ„ÛŒ Ø¶Ø§ÛŒØ¹Ø§Øª:
{self._format_waste_reasons(warehouse_ctx['waste_analysis']['current_month']['by_reason'])}

Ù¾Ø±Ø¶Ø§ÛŒØ¹Ø§Øªâ€ŒØªØ±ÛŒÙ† Ú©Ø§Ù„Ø§Ù‡Ø§:
{self._format_top_wasted(warehouse_ctx['waste_analysis']['current_month']['top_wasted'])}

â•â•â• Ø§Ù‚Ø¯Ø§Ù…Ø§Øª Ù…Ø¹Ù„Ù‚ â•â•â•
ØªØ±Ø§Ú©Ù†Ø´â€ŒÙ‡Ø§ÛŒ Ø¯Ø± Ø§Ù†ØªØ¸Ø§Ø± ØªØ§ÛŒÛŒØ¯: {warehouse_ctx['pending_actions']['approvals']['count']} Ù…ÙˆØ±Ø¯
Ú©Ø§Ù„Ø§Ù‡Ø§ÛŒ Ù†ÛŒØ§Ø²Ù…Ù†Ø¯ Ø´Ù…Ø§Ø±Ø´: {warehouse_ctx['pending_actions']['inventory_counts']['overdue_count']} Ù‚Ù„Ù…
Ù…ØºØ§ÛŒØ±Øªâ€ŒÙ‡Ø§ÛŒ Ø­Ù„â€ŒÙ†Ø´Ø¯Ù‡: {warehouse_ctx['pending_actions']['unresolved_variances']['count']} Ù…ÙˆØ±Ø¯

â•â•â• Ù‡Ø´Ø¯Ø§Ø±Ù‡Ø§ÛŒ ÙØ¹Ø§Ù„ â•â•â•
{self._format_alerts(warehouse_ctx['active_alerts'])}

â•â•â• Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯Ø§Øª Ù‡ÙˆØ´Ù…Ù†Ø¯ â•â•â•
Ù„ÛŒØ³Øª Ø³ÙØ§Ø±Ø´ Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ÛŒ:
{self._format_reorder_list(warehouse_ctx['smart_suggestions']['reorder_list'])}

Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ Ú©Ø§Ù‡Ø´ Ø¶Ø§ÛŒØ¹Ø§Øª:
{self._format_suggestions(warehouse_ctx['smart_suggestions']['waste_reduction'])}

Ø§ÙˆÙ„ÙˆÛŒØª Ø´Ù…Ø§Ø±Ø´:
{self._format_suggestions(warehouse_ctx['smart_suggestions']['count_priorities'])}
""")
    
    return "\n".join(context_parts)

def _format_critical_items(self, items: list) -> str:
    if not items:
        return "Ù‡ÛŒÚ† Ú©Ø§Ù„Ø§ÛŒÛŒ Ø¯Ø± ÙˆØ¶Ø¹ÛŒØª Ø¨Ø­Ø±Ø§Ù†ÛŒ Ù†ÛŒØ³Øª âœ…"
    return "\n".join([
        f"â€¢ {item['name']}: {item['current']} {item['unit']} (Ø­Ø¯Ø§Ù‚Ù„: {item['min']}) - {item['days_to_stockout']} Ø±ÙˆØ² Ù…Ø§Ù†Ø¯Ù‡"
        for item in items[:5]
    ])

def _format_waste_reasons(self, reasons: list) -> str:
    if not reasons:
        return "Ø§Ø·Ù„Ø§Ø¹Ø§ØªÛŒ Ù…ÙˆØ¬ÙˆØ¯ Ù†ÛŒØ³Øª"
    return "\n".join([
        f"â€¢ {r['reason']}: {r['percentage']}% ({r['amount']:,.0f} Ø±ÛŒØ§Ù„)"
        for r in reasons
    ])

def _format_top_wasted(self, items: list) -> str:
    if not items:
        return "Ø§Ø·Ù„Ø§Ø¹Ø§ØªÛŒ Ù…ÙˆØ¬ÙˆØ¯ Ù†ÛŒØ³Øª"
    return "\n".join([
        f"â€¢ {item['name']}: {item['amount']:,.0f} Ø±ÛŒØ§Ù„"
        for item in items
    ])

def _format_alerts(self, alerts: list) -> str:
    if not alerts:
        return "Ù‡ÛŒÚ† Ù‡Ø´Ø¯Ø§Ø± ÙØ¹Ø§Ù„ÛŒ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯ âœ…"
    return "\n".join([
        f"â€¢ [{alert['severity']}] {alert['message']}"
        for alert in alerts[:5]
    ])

def _format_reorder_list(self, items: list) -> str:
    if not items:
        return "Ù†ÛŒØ§Ø²ÛŒ Ø¨Ù‡ Ø³ÙØ§Ø±Ø´ ÙÙˆØ±ÛŒ Ù†ÛŒØ³Øª âœ…"
    return "\n".join([
        f"â€¢ {item['item']}: {item['suggested_qty']} {item['unit']} ({item['urgency']})"
        for item in items
    ])

def _format_suggestions(self, suggestions: list) -> str:
    if not suggestions:
        return "Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ÛŒ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯"
    return "\n".join([f"â€¢ {s}" for s in suggestions])
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
PHASE 3: UPDATE SYSTEM PROMPT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Update the system prompt in chat_service.py to include warehouse capabilities:

Python

SYSTEM_PROMPT = """
ØªÙˆ Ø¯Ø³ØªÛŒØ§Ø± Ù‡ÙˆØ´Ù…Ù†Ø¯ Ù…Ø¯ÛŒØ±ÛŒØª Ø§Ù†Ø¨Ø§Ø± Ùˆ Ù…ÙˆØ¬ÙˆØ¯ÛŒ Ù‡ØªÙ„ Ù‡Ø³ØªÛŒ.

Ù‚Ø§Ø¨Ù„ÛŒØªâ€ŒÙ‡Ø§ÛŒ ØªÙˆ:
Û±. Ù¾Ø§Ø³Ø® Ø¨Ù‡ Ø³ÙˆØ§Ù„Ø§Øª Ø¯Ø±Ø¨Ø§Ø±Ù‡ Ù…ÙˆØ¬ÙˆØ¯ÛŒ Ú©Ø§Ù„Ø§Ù‡Ø§
Û². ØªØ­Ù„ÛŒÙ„ Ø¶Ø§ÛŒØ¹Ø§Øª Ùˆ Ø§Ø±Ø§Ø¦Ù‡ Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ Ø¨Ø±Ø§ÛŒ Ú©Ø§Ù‡Ø´ Ø¢Ù†
Û³. Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ Ù„ÛŒØ³Øª Ø®Ø±ÛŒØ¯ Ø¨Ø± Ø§Ø³Ø§Ø³ Ù…ÙˆØ¬ÙˆØ¯ÛŒ
Û´. Ù‡Ø´Ø¯Ø§Ø± Ø¯Ø±Ø¨Ø§Ø±Ù‡ Ú©Ø§Ù„Ø§Ù‡Ø§ÛŒ Ú©Ù… ÛŒØ§ Ø²ÛŒØ§Ø¯
Ûµ. Ù…Ù‚Ø§ÛŒØ³Ù‡ Ø¹Ù…Ù„Ú©Ø±Ø¯ Ù‡ØªÙ„â€ŒÙ‡Ø§
Û¶. Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒÛŒ Ø¨Ø±Ø§ÛŒ Ø§Ù†Ø¨Ø§Ø±Ú¯Ø±Ø¯Ø§Ù†ÛŒ
Û·. ØªØ­Ù„ÛŒÙ„ Ø±ÙˆÙ†Ø¯ Ù…ØµØ±Ù Ùˆ Ø¶Ø§ÛŒØ¹Ø§Øª

Ù‚ÙˆØ§Ù†ÛŒÙ† Ù¾Ø§Ø³Ø®Ú¯ÙˆÛŒÛŒ:
- Ù‡Ù…ÛŒØ´Ù‡ Ø§Ø² Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ ÙˆØ§Ù‚Ø¹ÛŒ Ø³ÛŒØ³ØªÙ… Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†
- Ø§Ø¹Ø¯Ø§Ø¯ Ø±Ø§ Ø¨Ø§ Ø¬Ø¯Ø§Ú©Ù†Ù†Ø¯Ù‡ Ù‡Ø²Ø§Ø±Ú¯Ø§Ù† Ù†Ù…Ø§ÛŒØ´ Ø¨Ø¯Ù‡
- Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯Ø§Øª Ø¹Ù…Ù„ÛŒ Ùˆ Ù‚Ø§Ø¨Ù„ Ø§Ø¬Ø±Ø§ Ø¨Ø¯Ù‡
- Ø§Ú¯Ø± Ú†ÛŒØ²ÛŒ Ù†Ú¯Ø±Ø§Ù†â€ŒÚ©Ù†Ù†Ø¯Ù‡ Ø§Ø³ØªØŒ Ù‡Ø´Ø¯Ø§Ø± Ø¨Ø¯Ù‡
- Ø§Ø² Ø§ÛŒÙ…ÙˆØ¬ÛŒ Ø¨Ø±Ø§ÛŒ Ø®ÙˆØ§Ù†Ø§ÛŒÛŒ Ø¨Ù‡ØªØ± Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†

Ù„Ø­Ù†: Ø­Ø±ÙÙ‡â€ŒØ§ÛŒØŒ ØµÙ…ÛŒÙ…ÛŒØŒ Ùˆ Ú©Ø§Ø±Ø¨Ø±Ø¯ÛŒ
Ø²Ø¨Ø§Ù†: ÙØ§Ø±Ø³ÛŒ
"""
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
PHASE 4: ADD HELPER FUNCTIONS TO LLAMA ANALYZER
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

In services/llama_analyzer.py, add warehouse analysis:

Python

def analyze_warehouse_status(self, warehouse_context: dict) -> str:
    """Generate AI analysis of warehouse status"""
    
    prompt = f"""
    Ø¨Ø± Ø§Ø³Ø§Ø³ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ø²ÛŒØ±ØŒ ÛŒÚ© ØªØ­Ù„ÛŒÙ„ Ú©ÙˆØªØ§Ù‡ Ùˆ Ú©Ø§Ø±Ø¨Ø±Ø¯ÛŒ Ø§Ø² ÙˆØ¶Ø¹ÛŒØª Ø§Ù†Ø¨Ø§Ø± Ø§Ø±Ø§Ø¦Ù‡ Ø¨Ø¯Ù‡:
    
    Ù…ÙˆØ¬ÙˆØ¯ÛŒ Ø¨Ø­Ø±Ø§Ù†ÛŒ: {warehouse_context['stock_status']['critical_count']} Ù‚Ù„Ù…
    Ù†Ø±Ø® Ø¶Ø§ÛŒØ¹Ø§Øª: {warehouse_context['waste_analysis']['current_month']['rate']}%
    ØªØ§ÛŒÛŒØ¯ Ù…Ø¹Ù„Ù‚: {warehouse_context['pending_actions']['approvals']['count']}
    
    Ú©Ø§Ù„Ø§Ù‡Ø§ÛŒ Ø¨Ø­Ø±Ø§Ù†ÛŒ:
    {json.dumps(warehouse_context['stock_status']['critical_items'][:3], ensure_ascii=False)}
    
    Ø¯Ù„Ø§ÛŒÙ„ Ø¶Ø§ÛŒØ¹Ø§Øª:
    {json.dumps(warehouse_context['waste_analysis']['current_month']['by_reason'], ensure_ascii=False)}
    
    Ù„Ø·ÙØ§Ù‹:
    Û±. Ø®Ù„Ø§ØµÙ‡ ÙˆØ¶Ø¹ÛŒØª (Û± Ø®Ø·)
    Û². Û³ Ø§Ù‚Ø¯Ø§Ù… ÙÙˆØ±ÛŒ Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ÛŒ
    Û³. Û± Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ Ø¨Ù„Ù†Ø¯Ù…Ø¯Øª
    """
    
    return self._call_llm(prompt)

def suggest_reorder(self, critical_items: list, budget: float = None) -> str:
    """Generate smart reorder suggestions"""
    
    prompt = f"""
    Ù„ÛŒØ³Øª Ú©Ø§Ù„Ø§Ù‡Ø§ÛŒ Ù†ÛŒØ§Ø²Ù…Ù†Ø¯ Ø³ÙØ§Ø±Ø´:
    {json.dumps(critical_items, ensure_ascii=False)}
    
    {'Ø¨ÙˆØ¯Ø¬Ù‡ Ù…ÙˆØ¬ÙˆØ¯: {:,.0f} Ø±ÛŒØ§Ù„'.format(budget) if budget else ''}
    
    Ù„Ø·ÙØ§Ù‹ ÛŒÚ© Ù„ÛŒØ³Øª Ø³ÙØ§Ø±Ø´ Ø¨Ù‡ÛŒÙ†Ù‡ Ø¨Ø§ Ø§ÙˆÙ„ÙˆÛŒØªâ€ŒØ¨Ù†Ø¯ÛŒ Ø§Ø±Ø§Ø¦Ù‡ Ø¨Ø¯Ù‡.
    """
    
    return self._call_llm(prompt)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
PHASE 5: ADD IMPORTS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Ensure all necessary imports are added at the top of chat_service.py:

Python

from services.warehouse_service import WarehouseService
from services.waste_analysis_service import WasteAnalysisService
from services.inventory_count_service import InventoryCountService
from models.transaction import WASTE_REASONS, DEPARTMENTS
from models.alert import Alert
from models.inventory_count import InventoryCount
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
TESTING
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

After implementation, the chatbot should be able to answer:

"Ù…ÙˆØ¬ÙˆØ¯ÛŒ Ø¨Ø±Ù†Ø¬ Ú†Ù‚Ø¯Ø±Ù‡ØŸ" â†’ Shows current stock + alert if low
"Ú†Ø±Ø§ Ø¶Ø§ÛŒØ¹Ø§Øª Ø²ÛŒØ§Ø¯ Ø´Ø¯Ù‡ØŸ" â†’ Analysis by reason with suggestions
"Ú†Ù‡ Ú†ÛŒØ²ÛŒ Ø¨Ø§ÛŒØ¯ Ø¨Ø®Ø±Ù…ØŸ" â†’ Smart reorder list
"ÙˆØ¶Ø¹ÛŒØª Ø§Ù†Ø¨Ø§Ø± Ú†Ø·ÙˆØ±Ù‡ØŸ" â†’ Full dashboard summary
"Ú©Ø¯Ø§Ù… Ú©Ø§Ù„Ø§Ù‡Ø§ Ù†ÛŒØ§Ø² Ø¨Ù‡ Ø´Ù…Ø§Ø±Ø´ Ø¯Ø§Ø±Ù†Ø¯ØŸ" â†’ Priority list
"Ú†Ù†Ø¯ ØªØ§ÛŒÛŒØ¯ Ù…Ø¹Ù„Ù‚ Ø¯Ø§Ø±Ù…ØŸ" â†’ Pending approvals
Deliver: Complete integration code with all phases implemented.

text


---

## ğŸ“Š Ø®Ù„Ø§ØµÙ‡ ØªØºÛŒÛŒØ±Ø§Øª

| ÙØ§Ø² | Ú©Ø§Ø± | ÙØ§ÛŒÙ„ |
|-----|-----|------|
| Û± | Ø³Ø§Ø®Øª Context Builder Ø§Ù†Ø¨Ø§Ø± | `services/chat_service.py` |
| Û² | Ø§ØªØµØ§Ù„ Ø¨Ù‡ Context Ø§ØµÙ„ÛŒ | `services/chat_service.py` |
| Û³ | Ø¢Ù¾Ø¯ÛŒØª System Prompt | `services/chat_service.py` |
| Û´ | ØªÙˆØ§Ø¨Ø¹ ØªØ­Ù„ÛŒÙ„ Ø¬Ø¯ÛŒØ¯ | `services/llama_analyzer.py` |
| Ûµ | Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Imports | Ù‡Ù…Ù‡ ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ |

---

## ğŸ¯ Ø¨Ø¹Ø¯ Ø§Ø² Ø§Ø¬Ø±Ø§ØŒ AI Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ø¯:

| Ø³ÙˆØ§Ù„ Ú©Ø§Ø±Ø¨Ø± | Ø¬ÙˆØ§Ø¨ AI |
|------------|---------|
| "Ù…ÙˆØ¬ÙˆØ¯ÛŒ Ø¨Ø±Ù†Ø¬ Ú†Ù‚Ø¯Ø±Ù‡ØŸ" | Û´Ûµ Ú©ÛŒÙ„ÙˆÚ¯Ø±Ù… âš ï¸ Ú©Ù…ØªØ± Ø§Ø² Ø­Ø¯ Ù…Ø¬Ø§Ø² |
| "Ú†Ø±Ø§ Ø¶Ø§ÛŒØ¹Ø§Øª Ø²ÛŒØ§Ø¯ Ø´Ø¯Ù‡ØŸ" | Û´Ûµ% ØªØ§Ø±ÛŒØ® Ø§Ù†Ù‚Ø¶Ø§ - Ø¨Ø±Ø±Ø³ÛŒ Ø®Ø±ÛŒØ¯ Ø´ÛŒØ± |
| "Ú†Ù‡ Ú†ÛŒØ²ÛŒ Ø¨Ø§ÛŒØ¯ Ø¨Ø®Ø±Ù…ØŸ" | Û±. Ø¨Ø±Ù†Ø¬ (ÙÙˆØ±ÛŒ) Û². Ø±ÙˆØºÙ† (Ø§ÛŒÙ† Ù‡ÙØªÙ‡) |
| "ÙˆØ¶Ø¹ÛŒØª Ø§Ù†Ø¨Ø§Ø± Ú†Ø·ÙˆØ±Ù‡ØŸ" | Û²Û³ Ú©Ø§Ù„Ø§ Ø¨Ø­Ø±Ø§Ù†ÛŒØŒ Ûµ.Û²% Ø¶Ø§ÛŒØ¹Ø§ØªØŒ Û³ ØªØ§ÛŒÛŒØ¯ Ù…Ø¹Ù„Ù‚ |
| "Ú©Ø¯Ø§Ù… Ù‡ØªÙ„ Ø¨Ù‡ØªØ± Ú©Ø§Ø± Ù…ÛŒâ€ŒÚ©Ù†Ø¯ØŸ" | Ù„Ø§Ù„Ù‡ Ø¨ÛŒØ³ØªÙˆÙ† Ø¨Ø§ Û².Û±% Ø¶Ø§ÛŒØ¹Ø§Øª |

